---
bbb_hostname: "{{ ansible_fqdn }}"
bbb_nginx_privacy: true

bbb_stun_servers:
- server: ""
bbb_ice_servers: []
bbb_turn_servers:
- server: ""
  port: ""
  secret: ""
  tls: false

bbb_secret: "{{ bbb_api_key }}"
bbb_webhooks_enable: false
bbb_allow_mail_notifications: true
bbb_disable_recordings: false
bbb_api_demos_enable: false
bbb_mute_on_start: false
bbb_nodejs_version: 12
bbb_cpuschedule: true
bbb_freeswitch_ipv6: true
bbb_freeswitch_external_ip: "stun:{{ (bbb_stun_servers | first).server }}"
bbb_system_locale: en_US.UTF-8
bbb_mongodb_version: 4.2
bbb_mongodb_tempfssize: "512m"
bbb_repo_version: "230"

bbb_webrtc_sfu_singlekurento:
  balancing-strategy: ROUND_ROBIN
  kurento:
    - ip: "{{ ansible_default_ipv4.address }}"
      url: ws://127.0.0.1:8888/kurento
      mediaType: main
      ipClassMappings:
        local: ''
        private: ''
        public: ''
      options:
        failAfter: 5
        request_timeout: 30000
        response_timeout: 30000
  freeswitch:
    esl_password: "{{ bbb_freeswitch_socket_password }}"
  log:
    level: warn
    filename:

bbb_webrtc_sfu_multikurento:
  balancing-strategy: MEDIA_TYPE
  kurento:
    - ip: "{{ ansible_default_ipv4.address }}"
      url: ws://127.0.0.1:8888/kurento
      mediaType: main
      ipClassMappings:
        local: ''
        private: ''
        public: ''
      options:
        failAfter: 5
        request_timeout: 30000
        response_timeout: 30000
    - ip: "{{ ansible_default_ipv4.address }}"
      url: ws://127.0.0.1:8889/kurento
      mediaType: audio
      ipClassMappings:
        local: ''
        private: ''
        public: ''
      options:
        failAfter: 5
        request_timeout: 30000
        response_timeout: 30000
    - ip: "{{ ansible_default_ipv4.address }}"
      url: ws://127.0.0.1:8890/kurento
      mediaType: content
      ipClassMappings:
        local: ''
        private: ''
        public: ''
      options:
        failAfter: 5
        request_timeout: 30000
        response_timeout: 30000
  freeswitch:
    esl_password: "{{ bbb_freeswitch_socket_password }}"
  log:
    level: warn
    filename:

bbb_meteor:
  public:
    note:
      url: "https://{{ inventory_hostname }}/pad"
    app:
      skipCheck: false
      mirrorOwnWebcam: true
      enableMultipleCameras: true
      enableNetworkInformation: true
      breakoutRoomLimit: 16
      warnAboutUnsavedContentOnMeetingEnd: true
    chat:
      bufferChatInsertsMs: 100
      typingIndicator:
        enabled: false
    media:
      sipjsHackViaWs: true
    kurento:
      wsUrl: "wss://{{ inventory_hostname }}/bbb-webrtc-sfu"
      cameraProfiles:
      - id: low-u30
        name: low-u30
        bitrate: 30
        hidden: true
        constraints:
          frameRate: 3
      - id: low-u25
        name: low-u25
        bitrate: 40
        hidden: true
        constraints:
          frameRate: 3
      - id: low-u20
        name: low-u20
        bitrate: 50
        hidden: true
        constraints:
          frameRate: 5
      - id: low-u15
        name: low-u15
        bitrate: 70
        hidden: true
        constraints:
          frameRate: 8
      - id: low-u12
        name: low-u12
        bitrate: 90
        hidden: true
        constraints:
          frameRate: 10
      - id: low-u8
        name: low-u8
        bitrate: 100
        hidden: true
        constraints:
          frameRate: 10
      - id: low
        name: Low quality
        default: false
        bitrate: 50
      - id: medium
        name: Medium quality
        default: true
        bitrate: 200
      - id: high
        name: High quality
        default: false
        bitrate: 500
      - id: hd
        name: High definition
        default: false
        bitrate: 1200
      cameraQualityThresholds:
        enabled: true
        thresholds:
          - threshold: 8
            profile: low-u8
          - threshold: 12
            profile: low-u12
          - threshold: 15
            profile: low-u15
          - threshold: 20
            profile: low-u20
          - threshold: 25
            profile: low-u25
          - threshold: 30
            profile: low-u30
      cameraTimeouts:
        baseTimeout: 30000
      pagination:
        enabled: true
        pageChangeDebounceTime: 2500
        desktopPageSizes:
          moderator: 16
          viewer: 16
        mobilePageSizes:
          moderator: 8
          viewer: 8

bbb_html5_backend_processes: 1
bbb_html5_frontend_processes: 1

bbb_web_loglevel: "WARN"

bbb_dialplan_quality: "cdquality"
bbb_dialplan_energy_level: 100
bbb_dialplan_comfort_noise: 1400
bbb_custom_presentation: "default.pdf"
# set this to the name the default presentation on the host should have.
# if its not default.pdf moderators are able to delete the default presentation. Thats sometimes helpful and works fine.
bbb_custom_presentation_name: "default.pdf" 
bbb_api_key: ""
bbb_meeting_inactivity_timeout_minutes: 10

bbb_sip_extension: "{{ ansible_hostname }}"
